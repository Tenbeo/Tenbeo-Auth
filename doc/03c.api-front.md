
# Front-end API usage

- [Example of React / Node Web-Application with **Tenbeo Login**](https://github.com/Tenbeo/Auth-React-Example)
- [The API documentation](./03a.api-endpoints.md)

### Fetch examples typescript / javascript

#### The type structure

```ts
export interface IUser {
    id          :number
    name        :string
    publicKey   :string
    email       ?:string
    data        ?:object
}

type TSessionStatus = "PENDING" | "VALIDATED" | "EXPIRED"
export interface ISession {
    id       :string
    status   :TSessionStatus
}

interface ILogin {
    url	:string
    qr  :string
}

export interface IAuthCreateResponse {
    session ?:ISession
    login   ?:ILogin
    user    ?:IUser
}

export interface IAuthTrackResponse {
    session ?:ISession
    user    ?:IUser
}
export interface IAuthLogoutResponse {
    status  ?:"success"
}
```

#### Create session fetch

> Always include credentials to send session cookies

```ts
async function createSession ():Promise<IAuthCreateResponse> {
  const request = await fetch(`${tenbeoAuthInstanceLocation}/api/1.0/auth/create/${tenbeoAuthInstanceApplicationSlug}`, {
    credentials: "include"
  })
  return await request.json()
}
```

### Track session

> Call this every second to check if user has logged in 

```ts
async function trackSession ():Promise<IAuthTrackResponse> {
  const request = await fetch(`${tenbeoAuthInstanceLocation}/api/1.0/auth/track/${tenbeoAuthInstanceApplicationSlug}`, {
    credentials: "include"
  })
  return await request.json()
}
```

### Log out

```ts
async function logOut ():Promise<IAuthLogoutResponse> {
  const request = await fetch(`${tenbeoAuthInstanceLocation}/api/1.0/auth/logout/${tenbeoAuthInstanceApplicationSlug}`, {
    credentials: "include",
    method: "POST",
  })
  return await request.json()
}
```